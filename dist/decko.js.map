{"version":3,"sources":["../src/decko.js"],"names":["EMPTY","HOP","Object","prototype","hasOwnProperty","fns","memoize","fn","opt","cache","a","k","String","caseSensitive","toLowerCase","call","apply","debounce","opts","p","delay","args","context","timer","setTimeout","bind","target","key","value","definingProperty","configurable","get","defineProperty","writable","multiMethod","f","c","inner","deco","decorate","decorator","d","l","length","desc"],"mappings":"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","sourcesContent":["\r\nconst EMPTY = {};\r\nconst HOP = Object.prototype.hasOwnProperty;\r\n\r\nlet fns = {\r\n\t/**  let cachedFn = memoize(originalFn); */\r\n\tmemoize(fn, opt=EMPTY) {\r\n\t\tlet cache = opt.cache || {};\r\n\t\treturn function(...a) {\r\n\t\t\tlet k = String(a[0]);\r\n\t\t\tif (opt.caseSensitive===false) k = k.toLowerCase();\r\n\t\t\treturn HOP.call(cache,k) ? cache[k] : (cache[k] = fn.apply(this, a));\r\n\t\t};\r\n\t},\r\n\r\n\t/** let throttled = debounce(10, console.log); */\r\n\tdebounce(fn, opts) {\r\n\t\tif (typeof opts==='function') { let p = fn; fn = opts; opts = p; }\r\n\t\tlet delay = opts && opts.delay || opts || 0,\r\n\t\t\targs, context, timer;\r\n\t\treturn function(...a) {\r\n\t\t\targs = a;\r\n\t\t\tcontext = this;\r\n\t\t\tif (!timer) timer = setTimeout( () => {\r\n\t\t\t\tfn.apply(context, args);\r\n\t\t\t\targs = context = timer = null;\r\n\t\t\t}, delay);\r\n\t\t};\r\n\t},\r\n\r\n\tbind(target, key, { value: fn }) {\r\n\t\t// In IE11 calling Object.defineProperty has a side-effect of evaluating the\r\n\t\t// getter for the property which is being replaced. This causes infinite\r\n\t\t// recursion and an \"Out of stack space\" error.\r\n\t\tlet definingProperty = false;\r\n\t\treturn {\r\n\t\t\tconfigurable: true,\r\n\t\t\tget() {\r\n\t\t\t\tif (definingProperty) {\r\n\t\t\t\t\treturn fn;\r\n\t\t\t\t}\r\n\t\t\t\tlet value = fn.bind(this);\r\n\t\t\t\tdefiningProperty = true;\r\n\t\t\t\tObject.defineProperty(this, key, {\r\n\t\t\t\t\tvalue,\r\n\t\t\t\t\tconfigurable: true,\r\n\t\t\t\t\twritable: true\r\n\t\t\t\t});\r\n\t\t\t\tdefiningProperty = false;\r\n\t\t\t\treturn value;\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n};\r\n\r\n\r\nlet memoize = multiMethod(fns.memoize),\r\n\tdebounce = multiMethod(fns.debounce),\r\n\tbind = multiMethod((f,c)=>f.bind(c), ()=>fns.bind);\r\n\r\nexport { memoize, debounce, bind };\r\nexport default { memoize, debounce, bind };\r\n\r\n\r\n/** Creates a function that supports the following calling styles:\r\n *\td() - returns an unconfigured decorator\r\n *\td(opts) - returns a configured decorator\r\n *\td(fn, opts) - returns a decorated proxy to `fn`\r\n *\td(target, key, desc) - the decorator itself\r\n *\r\n *\t@Example:\r\n *\t\t// simple identity deco:\r\n *\t\tlet d = multiMethod( fn => fn );\r\n *\r\n *\t\tclass Foo {\r\n *\t\t\t@d\r\n *\t\t\tbar() { }\r\n *\r\n *\t\t\t@d()\r\n *\t\t\tbaz() { }\r\n *\r\n *\t\t\t@d({ opts })\r\n *\t\t\tbat() { }\r\n *\r\n *\t\t\tbap = d(() => {})\r\n *\t\t}\r\n */\r\nfunction multiMethod(inner, deco) {\r\n\tdeco = deco || inner.decorate || decorator(inner);\r\n\tlet d = deco();\r\n\treturn (...args) => {\r\n\t\tlet l = args.length;\r\n\t\treturn (l<2 ? deco : (l>2 ? d : inner))(...args);\r\n\t};\r\n}\r\n\r\n/** Returns function supports the forms:\r\n *\tdeco(target, key, desc) -> decorate a method\r\n *\tdeco(Fn) -> call the decorator proxy on a function\r\n */\r\nfunction decorator(fn) {\r\n\treturn opt => (\r\n\t\ttypeof opt==='function' ? fn(opt) : (target, key, desc) => {\r\n\t\t\tdesc.value = fn(desc.value, opt, target, key, desc);\r\n\t\t}\r\n\t);\r\n}\r\n"],"file":"decko.js"}